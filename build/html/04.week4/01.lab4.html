<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>5.1. Lab 04: Managing MySQL: User, Data, &amp; Quality Check &mdash; ist5001 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=9408d7bc" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=f2a433a1"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5.2. Homework 04 Test &amp; Conditional Expressions" href="02.homework4.html" />
    <link rel="prev" title="5. Week 4" href="week4.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            ist5001
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../00.appendix/appendix.html">1. Appendix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01.week1/week1.html">2. Week 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02.week2/week2.html">3. Week 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03.week3/week3.html">4. Week 3</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="week4.html">5. Week 4</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.1. Lab 04: Managing MySQL: User, Data, &amp; Quality Check</a></li>
<li class="toctree-l2"><a class="reference internal" href="02.homework4.html">5.2. Homework 04 Test &amp; Conditional Expressions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../05.week5/week5.html">6. Week 5</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06.week6/week6.html">7. Week 6</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07.week7/week7.html">8. Week 7</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ist5001</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="week4.html"><span class="section-number">5. </span>Week 4</a></li>
      <li class="breadcrumb-item active"><span class="section-number">5.1. </span>Lab 04: Managing MySQL: User, Data, &amp; Quality Check</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/04.week4/01.lab4.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="lab-04-managing-mysql-user-data-quality-check">
<h1><span class="section-number">5.1. </span>Lab 04: Managing MySQL: User, Data, &amp; Quality Check<a class="headerlink" href="#lab-04-managing-mysql-user-data-quality-check" title="Link to this heading"></a></h1>
<div class="admonition-assignment-instruction admonition">
<p class="admonition-title">Assignment Instruction</p>
<p>To successfully complete this assignment, you are advised to pay attention to the following:</p>
<ol class="arabic simple">
<li><p><strong>Follow instructions:</strong> Read, interpret, and follow instructions very carefully. Finish reading the whole question and note the requirements before you start working on the question.</p></li>
<li><p><strong>Use resources:</strong> You may use any resources available to you via the web. You are encouraged to discuss the problems with others before you sit down and attempt to answer the questions.</p></li>
<li><p><strong>Work independently:</strong> While you are completing the questions, you are expected to work on your own without direct help from other people (non-human resources such as search engines are still allowed).</p></li>
<li><p><strong>Work together:</strong> Come to the office hours to work as a group on the interpretation of and solutions to questions. When using text messaging, attach screenshots.</p></li>
<li><p><strong>For introduction to basic Linux and shell commands and special characters, see:</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="https://bashnet.org/docs/linux_shell_commands.php">Linux &amp; shell basic commands</a></p></li>
<li><p><a class="reference external" href="https://bashnet.org/docs/linux_special_characters.php">Linux &amp; shell special characters</a></p></li>
</ul>
</li>
</ol>
</div>
<div class="admonition-getting-started admonition">
<p class="admonition-title">Getting Started</p>
<ol class="arabic simple">
<li><p><strong>class directory:</strong> To begin this assignment, make sure you navigate into the class directory under your user home directory.</p></li>
<li><p><strong>scp the tar file:</strong> Use <cite>scp</cite> to copy the tar file <cite>a04.tar.gz</cite> from <cite>datacenter&#64;tychen.us</cite> to your <cite>~/class</cite> directory. The command is: <cite>scp datacenter&#64;tychen.us:~/class/labs/a04.tar.gz .</cite> (### don’t forget the “ . ” at the end of the command) and the password is “InCharge56!”</p></li>
<li><p><strong>unzip the tar file:</strong> Extract the contents of the tar file: <cite>tar -xf a04.tar.gz</cite>. Once the files are extracted, you should see the <cite>a04</cite> folder (a directory containing several directories and files) in your class directory. These are the files you need to complete this assignment.</p></li>
<li><p><strong>a04:</strong> Unless otherwise specified in the question, all file names are given relative to the directory <cite>~/class/a04</cite>.</p></li>
<li><p><strong>Passwords:</strong> All the account names and the corresponding passwords are recorded in Canvas Assignment <cite>a00</cite>, where you keep them updated.</p></li>
</ol>
</div>
<div class="admonition-when-you-are-done admonition">
<p class="admonition-title">When You Are Done</p>
<p>When you have completed the assignment,</p>
<ol class="arabic simple">
<li><p><strong>done.sh:</strong> Run the script <cite>done.sh</cite> in <cite>~/class</cite> as follows: <cite>./done.sh firstname lastname a04</cite> (The <cite>done.sh</cite> script is part of Assignment <cite>h01</cite>.)</p></li>
<li><p><strong>lab04.txt:</strong> The <cite>done.sh</cite> script will check your answers and create a new .txt called <cite>lab04.txt</cite> in the <cite>a04</cite> directory that you will need to submit to Canvas for assignment <cite>a04</cite>.</p></li>
<li><p><strong>Download lab04.txt to submit to Canvas:</strong> From your local computer terminal (cmd or PowerShell for Windows and Terminal for macOS), change into a folder (e.g., <cite>cd Documents</cite> to go into your Documents folder). Use the <cite>scp</cite> command to copy your submission file from your VM to your local computer’s Documents folder: <cite>scp YOUR_USERNAME&#64;YOUR_VM_IP_ADDRESS:~/class/a04/lab04.txt .</cite></p></li>
</ol>
<p><strong>Note:</strong> <em>You can run the `done.sh` script at any point when you are working on the assignment and the content of the generated `lab04.txt` may be helpful in addition to the check scripts in each question. However, you must run it just prior to submitting the generated `lab04.txt` file in your `class/a04` directory to Canvas to make sure you are submitting the most recent file.</em></p>
<p><strong>Note:</strong> <em>To see your VM’s IP address, run `ip addr` or `ifconfig` (installation of net-tools required).</em></p>
</div>
<div class="admonition-part-1-mysql-processes-and-root-password admonition">
<p class="admonition-title">Part 1. MySQL Processes And Root Password</p>
<p>This process must be completed as a Linux system administrator, so you will have to use your administrative user account to complete this part of the lab. You will reset the MySQL root password on your system and make sure it works properly.</p>
<p><strong>Determine if mysql is running on your computer.</strong></p>
<p>Use the command <cite>ps -aef</cite> to view all of the processes running on your computer (there are a lot of them).</p>
<p>Determine if mysql is running using the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ps</span> <span class="o">-</span><span class="n">aef</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">mysql</span>
</pre></div>
</div>
<p>You will see the results as below (the first line is the grep line you just issued, the second line is the mysql service and its binary is <cite>mysqld</cite>; the <cite>d</cite> stands for daemon, meaning a background process):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>chen_ad+ 31011 30856  0 15:57 pts/0    00:00:00 grep --color=auto mysql
mysql    32970     1  0 Feb02 ?        00:13:45 /usr/sbin/mysqld --daemonize --pid-file=/run/mysqld/mysqld.pid
</pre></div>
</div>
<p><strong>Use the sudo command to stop the mysql service as follows (note the service command syntax) (now that you need to run sudo, if you are not a sudoer now, you can use `su admin_account` to switch to it):</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">service</span> <span class="n">mysql</span> <span class="n">stop</span>
</pre></div>
</div>
<p>Check to make sure mysql has stopped running using <cite>ps -aef | grep mysql</cite>. Now you should only see the grep line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chen_ad</span><span class="o">+</span> <span class="mi">32077</span> <span class="mi">30856</span>  <span class="mi">0</span> <span class="mi">16</span><span class="p">:</span><span class="mi">00</span> <span class="n">pts</span><span class="o">/</span><span class="mi">0</span>    <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="n">grep</span> <span class="o">--</span><span class="n">color</span><span class="o">=</span><span class="n">auto</span> <span class="n">mysql</span>
</pre></div>
</div>
<p><strong>Next, create and modify a security directory:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">mkdir</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">mysqld</span>                   <span class="c1">### create directory</span>
<span class="n">sudo</span> <span class="n">chown</span> <span class="n">mysql</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">mysqld</span>             <span class="c1">### change directory owner to mysql</span>
</pre></div>
</div>
<p><strong>Force mysql into safe mode:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">mysqld_safe</span> <span class="o">--</span><span class="n">skip</span><span class="o">-</span><span class="n">grant</span><span class="o">-</span><span class="n">tables</span> <span class="o">&amp;</span>       <span class="c1">### mysql safe startup script; no password required</span>
</pre></div>
</div>
<p>When you run <cite>mysqld_safe</cite>, you will see results like below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>[1] 36875
chen_admin@vma50:~$ 2021-02-22T21:13:33.044512Z mysqld_safe Logging to syslog.
2021-02-22T21:13:33.049909Z mysqld_safe Logging to &#39;/var/log/mysql/error.log&#39;.
2021-02-22T21:13:33.096052Z mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql
</pre></div>
</div>
<p>The system will halt. But because the control operator <cite>&amp;</cite> has the process running in the background (in a subshell), we can press Enter to escape back to the Linux CLI.</p>
<p>Now let us make sure mysql safe mode processes are running using <cite>ps -aef | grep mysql</cite>. You should see 4 mysql related processes. Your output will be similar to the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">root</span>     <span class="mi">36875</span> <span class="mi">30856</span>  <span class="mi">0</span> <span class="mi">16</span><span class="p">:</span><span class="mi">13</span> <span class="n">pts</span><span class="o">/</span><span class="mi">0</span>    <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="n">sudo</span> <span class="n">mysqld_safe</span> <span class="o">--</span><span class="n">skip</span><span class="o">-</span><span class="n">grant</span><span class="o">-</span><span class="n">tables</span>
<span class="n">root</span>     <span class="mi">36876</span> <span class="mi">36875</span>  <span class="mi">0</span> <span class="mi">16</span><span class="p">:</span><span class="mi">13</span> <span class="n">pts</span><span class="o">/</span><span class="mi">0</span>    <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">sh</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">mysqld_safe</span> <span class="o">--</span><span class="n">skip</span><span class="o">-</span><span class="n">grant</span><span class="o">-</span><span class="n">tables</span>
<span class="n">mysql</span>    <span class="mi">37236</span> <span class="mi">36876</span>  <span class="mi">0</span> <span class="mi">16</span><span class="p">:</span><span class="mi">13</span> <span class="n">pts</span><span class="o">/</span><span class="mi">0</span>    <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">mysqld</span> <span class="o">--</span><span class="n">basedir</span><span class="o">=/</span><span class="n">usr</span> <span class="o">--</span><span class="n">datadir</span><span class="o">=/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">mysql</span> <span class="o">--</span><span class="n">plugin</span><span class="o">-</span><span class="nb">dir</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">plugin</span> <span class="o">--</span><span class="n">user</span><span class="o">=</span><span class="n">mysql</span> <span class="o">--</span><span class="n">skip</span><span class="o">-</span><span class="n">grant</span><span class="o">-</span><span class="n">tables</span> <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">error</span><span class="o">=/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">error</span><span class="o">.</span><span class="n">log</span> <span class="o">--</span><span class="n">pid</span><span class="o">-</span><span class="n">file</span><span class="o">=/</span><span class="n">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">mysqld</span><span class="o">/</span><span class="n">mysqld</span><span class="o">.</span><span class="n">pid</span> <span class="o">--</span><span class="n">socket</span><span class="o">=/</span><span class="n">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">mysqld</span><span class="o">/</span><span class="n">mysqld</span><span class="o">.</span><span class="n">sock</span> <span class="o">--</span><span class="n">port</span><span class="o">=</span><span class="mi">3306</span> <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">syslog</span><span class="o">=</span><span class="mi">1</span> <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">syslog</span><span class="o">-</span><span class="n">facility</span><span class="o">=</span><span class="n">daemon</span> <span class="o">--</span><span class="n">log</span><span class="o">-</span><span class="n">syslog</span><span class="o">-</span><span class="n">tag</span><span class="o">=</span>
<span class="n">chen_ad</span><span class="o">+</span> <span class="mi">38388</span> <span class="mi">30856</span>  <span class="mi">0</span> <span class="mi">16</span><span class="p">:</span><span class="mi">16</span> <span class="n">pts</span><span class="o">/</span><span class="mi">0</span>    <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="n">grep</span> <span class="o">--</span><span class="n">color</span><span class="o">=</span><span class="n">auto</span> <span class="n">mysql</span>
</pre></div>
</div>
<p>This means <cite>mysqld</cite> (server) is running in safe mode and we now can log in as root without password.</p>
<p><strong>Access MySQL as the root user, without a password (`mysqld` is the server, `mysql` is the command line tool):</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mysql</span> <span class="o">-</span><span class="n">u</span> <span class="n">root</span>
</pre></div>
</div>
<p>Welcome to the MySQL monitor.  Commands end with ; or g.
Your MySQL connection id is 2
Server version: 5.7.33-0ubuntu0.18.04.1 (Ubuntu)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Copyright</span> <span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">2021</span><span class="p">,</span> <span class="n">Oracle</span> <span class="ow">and</span><span class="o">/</span><span class="ow">or</span> <span class="n">its</span> <span class="n">affiliates</span><span class="o">.</span>

<span class="n">Oracle</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">registered</span> <span class="n">trademark</span> <span class="n">of</span> <span class="n">Oracle</span> <span class="n">Corporation</span> <span class="ow">and</span><span class="o">/</span><span class="ow">or</span> <span class="n">its</span>
<span class="n">affiliates</span><span class="o">.</span> <span class="n">Other</span> <span class="n">names</span> <span class="n">may</span> <span class="n">be</span> <span class="n">trademarks</span> <span class="n">of</span> <span class="n">their</span> <span class="n">respective</span>
<span class="n">owners</span><span class="o">.</span>

<span class="n">Type</span> <span class="s1">&#39;help;&#39;</span> <span class="ow">or</span> <span class="s1">&#39;\h&#39;</span> <span class="k">for</span> <span class="n">help</span><span class="o">.</span> <span class="n">Type</span> <span class="s1">&#39;\c&#39;</span> <span class="n">to</span> <span class="n">clear</span> <span class="n">the</span> <span class="n">current</span> <span class="nb">input</span> <span class="n">statement</span><span class="o">.</span>

<span class="n">mysql</span><span class="o">&gt;</span>
</pre></div>
</div>
<p><strong>Once you have logged into the MySQL command line as root without a password, you can reset the MySQL root password by running the following MySQL queries in MySQL command line:</strong></p>
<p><strong>Select the mysql database:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">USE</span> <span class="n">mysql</span><span class="p">;</span>
</pre></div>
</div>
<p>Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A</p>
<p>Database changed</p>
<p><strong>Change the password of the root user in the user table (column User):</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">UPDATE</span> <span class="n">user</span> <span class="n">SET</span> <span class="n">plugin</span><span class="o">=</span><span class="s1">&#39;mysql_native_password&#39;</span> <span class="n">WHERE</span> <span class="n">User</span><span class="o">=</span><span class="s1">&#39;root&#39;</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">1</span> <span class="n">row</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
<span class="n">Rows</span> <span class="n">matched</span><span class="p">:</span> <span class="mi">1</span>  <span class="n">Changed</span><span class="p">:</span> <span class="mi">1</span>  <span class="n">Warnings</span><span class="p">:</span> <span class="mi">0</span>

<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">flush</span> <span class="n">privileges</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>

<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">ALTER</span> <span class="n">USER</span> <span class="s1">&#39;root&#39;</span><span class="o">@</span><span class="s1">&#39;localhost&#39;</span> <span class="n">IDENTIFIED</span> <span class="n">BY</span> <span class="s1">&#39;YOUR_PASS_WORD&#39;</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Reload the grant (permissions) tables to make the changes into effect:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">FLUSH</span> <span class="n">PRIVILEGES</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="n">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.01</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>
</div>
<p>Now that we have changed the root password for MySQL server, let us log out of mysql using exit. Next, we will stop mysql safe mode by shutting down mysql and then restart the mysqld server in normal mode:</p>
<p><strong>Exiting mysql CLI using exit or quit:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>mysql&gt; exit
Bye
chen_admin@vma50:~$
</pre></div>
</div>
<p>Note that after we quit from mysql CLI, we are back to the Linux CLI.</p>
<p><strong>Stop mysql safe mode:</strong> Now let’s stop mysql safe mode by using the command <cite>sudo mysqladmin -u root -pNewPassword shutdown</cite> (### note: no space after the -p option):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>chen_admin@vma50:~$ sudo mysqladmin -u root -pNewPassword shutdown
[sudo] password for chen_admin:
mysqladmin: [Warning] Using a password on the command line interface can be insecure.
2021-02-22T21:35:00.046226Z mysqld_safe mysqld from pid file /var/run/mysqld/mysqld.pid ended
[1]+  Done                    sudo mysqld_safe --skip-grant-tables
chen_admin@vma50:~$
</pre></div>
</div>
<p>You can use -p with the mysqladmin command like “sudo mysqladmin -u root -p shutdown” to enter the password after hitting enter to avoid the mysqladmin warning message.</p>
<p><strong>Restart mysql service:</strong> To restart the mysqld service, use the service command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">service</span> <span class="n">mysql</span> <span class="n">restart</span>
</pre></div>
</div>
<p><strong>Test it:</strong> To make sure the root password change is successful, log into mysql command line with the new password to make sure it works:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mysql</span> <span class="o">-</span><span class="n">u</span> <span class="n">root</span> <span class="o">-</span><span class="n">p</span>         <span class="c1">### -u, or --user, option means username; -p means password</span>
</pre></div>
</div>
<p><strong>Note:</strong> <em>You will get the socket error if you did not restart mysql:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>administrator@vma43:~/class/a04/q01$ mysql -u root -p
Enter password:
ERROR 2002 (HY000): Can&#39;t connect to local MySQL server through socket &#39;/var/run/mysqld/mysqld.sock&#39; (2)
</pre></div>
</div>
<p>If everything goes well, you will get into MySQL command line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Type</span> <span class="s1">&#39;help;&#39;</span> <span class="ow">or</span> <span class="s1">&#39;\h&#39;</span> <span class="k">for</span> <span class="n">help</span><span class="o">.</span> <span class="n">Type</span> <span class="s1">&#39;\c&#39;</span> <span class="n">to</span> <span class="n">clear</span> <span class="n">the</span> <span class="n">current</span> <span class="nb">input</span> <span class="n">statement</span><span class="o">.</span>

<span class="n">mysql</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Typing exit or quit will get you out of mysql command line.</p>
<p><strong>Record your MySQL root password to Assignment a00 on Canvas and log back to your Linux CLI as a regular user.</strong></p>
<p>To check this part of the assignment:</p>
<ol class="arabic simple">
<li><p>Change to your class/a04/q01 directory.</p></li>
<li><p>Edit the file a01.txt using the command <cite>nano a01.txt</cite></p></li>
<li><p>Use the arrow keys to move the cursor to the line starting with “A.”</p></li>
<li><p>Enter the word “DONE” on the line starting with “A.”</p></li>
<li><p>Save the file (using Ctrl-X)</p></li>
<li><p>Run the script <cite>check01.sh</cite> (using <cite>./check01.sh</cite>) to check your answer</p></li>
</ol>
</div>
<div class="admonition-part-2-creating-mysql-user-accounts admonition">
<p class="admonition-title">Part 2. Creating MySQL User Accounts</p>
<p><strong>To create your MySQL administrator account, log into mysql command line as root and do the following:</strong></p>
<ol class="arabic simple">
<li><p>Create a database called sales using your root account.</p></li>
<li><p>Create a mysql user account called salesadmin. This will be your database administrator account.</p></li>
<li><p>Grant the salesadmin account ALL privileges to all the tables (the “*”) in the sales database. The commands you use will look like this: (## Note that use single quotes around username, localhost, and password may be critical.)</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">CREATE</span> <span class="n">DATABASE</span> <span class="n">sales</span><span class="p">;</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">CREATE</span> <span class="n">USER</span> <span class="s1">&#39;salesadmin&#39;</span><span class="o">@</span><span class="s1">&#39;localhost&#39;</span> <span class="n">IDENTIFIED</span> <span class="n">BY</span> <span class="s1">&#39;YOUR_PASSWORD&#39;</span><span class="p">;</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">USE</span> <span class="n">sales</span><span class="p">;</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">GRANT</span> <span class="n">ALL</span> <span class="n">ON</span> <span class="n">sales</span><span class="o">.*</span> <span class="n">TO</span> <span class="s1">&#39;salesadmin&#39;</span><span class="o">@</span><span class="s1">&#39;localhost&#39;</span><span class="p">;</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">FLUSH</span> <span class="n">PRIVILEGES</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Create a second MySQL user account (salesmgr) that provides access to the data, but doesn’t have the authority to change the data in the database sales (i.e., grant this user SELECT privileges on all the tables in the database sales by using “GRANT SELECT” instead of “GRANT ALL” after creating the user).</p></li>
</ol>
<p><strong>Verify that you can log in to both of the new accounts and have access to the sales database.</strong> For each account, log into mysql CLI and use SHOW DATABASES to show the “information_schema” and “sales” databases (unlike when you are a root, where you see all the tables); then use SHOW GRANTS to show the appropriate rights for the logged in account. For example, when logged in MySQL command line as salesadmin, we can check the access privileges by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>mysql&gt; SHOW GRANTS;
+---------------------------------------------------------------+
| Grants for salesadmin@localhost                               |
+---------------------------------------------------------------+
| GRANT USAGE ON *.* TO &#39;salesadmin&#39;@&#39;localhost&#39;                |
| GRANT ALL PRIVILEGES ON `sales`.* TO &#39;salesadmin&#39;@&#39;localhost&#39; |
+---------------------------------------------------------------+
2 rows in set (0.00 sec)
</pre></div>
</div>
<p>When logged in as salesmgr, you will see the privilege SELECT on the second line of the table:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>mysql&gt; SHOW GRANTS;
+-----------------------------------------------------+
| Grants for salesmgr@localhost                       |
+-----------------------------------------------------+
| GRANT USAGE ON *.* TO &#39;salesmgr&#39;@&#39;localhost&#39;        |
| GRANT SELECT ON `sales`.* TO &#39;salesmgr&#39;@&#39;localhost&#39; |
+-----------------------------------------------------+
2 rows in set (0.00 sec)
</pre></div>
</div>
<p><strong>Record your mysql account names and passwords to assignment a00 and get back to the Linux CLI as a regular user.</strong></p>
<p>To check this part of the assignment:</p>
<ol class="arabic simple">
<li><p>Change to your class/a04/q02 directory.</p></li>
<li><p>Complete the checklist below (A-G) in the file a02.txt.</p></li>
<li><p>Save the file (using Ctrl-X)</p></li>
<li><p>Run the script <cite>check02.sh</cite> (using <cite>./check02.sh</cite>) to check your answer</p></li>
</ol>
<p><strong>Question 2 checklist:</strong></p>
<p>Parts B-F require a one-word answer (YES) when you have completed them.</p>
<p><strong>A.</strong> Enter the word DONE when you have completed Part 2 and each of the following steps.</p>
<p><strong>B.</strong> Have you shared your MySQL root password with your lab partner (if you have one)?</p>
<p><strong>C.</strong> Have you shared your salesadmin account password with your lab partner (if you have one)?</p>
<p><strong>D.</strong> Have you shared salesmgr account password with your lab partner (if you have one)?</p>
<p><strong>E.</strong> Does the salesadmin account have ALL privileges?</p>
<p><strong>F.</strong> Does the salesmgr account have SELECT privileges?</p>
<p><strong>G.</strong> Have you answered the above question truthfully?</p>
<p><strong>Note:</strong> When you operate your own virtual machine, answer the lab partner parts as you are your own partner.</p>
</div>
<div class="admonition-part-3-inserting-data-into-your-database admonition">
<p class="admonition-title">Part 3. Inserting Data into Your Database</p>
<p>We will insert 3 tables into our sales database using tools already made. Our major task will be checking the basic information in the tables.</p>
<p><strong>Use your `~/class/a04/q03` directory for this part of the lab.</strong></p>
<ol class="arabic">
<li><p>Run the Perl script <cite>agents.pl</cite> provided to read the file <cite>agents.txt</cite> in the SALESDATA directory. That program will create the file <cite>agents.sql</cite>.</p></li>
<li><p>Next, insert this data into the sales database <cite>sales</cite> using the following command within mysql command line (i.e., you will first need to log back into mysql as user <cite>salesadmin</cite> in the same directory where you ran the Perl script.):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="n">agents</span><span class="o">.</span><span class="n">sql</span><span class="p">;</span>  <span class="c1">### source executes commands in the current shell.</span>
                    <span class="c1">### We have used it when we worked on environment variables and aliases.</span>
</pre></div>
</div>
<p>You will see something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="o">...</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">1</span> <span class="n">row</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.01</span> <span class="n">sec</span><span class="p">)</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">1</span> <span class="n">row</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.01</span> <span class="n">sec</span><span class="p">)</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">1</span> <span class="n">row</span> <span class="n">affected</span> <span class="p">(</span><span class="mf">0.02</span> <span class="n">sec</span><span class="p">)</span>
<span class="n">mysql</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>If you source this .sql file for more than one time, you will see:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="o">...</span>
<span class="n">ERROR</span> <span class="mi">1062</span> <span class="p">(</span><span class="mi">23000</span><span class="p">):</span> <span class="n">Duplicate</span> <span class="n">entry</span> <span class="s1">&#39;D39-20-04&#39;</span> <span class="k">for</span> <span class="n">key</span> <span class="s1">&#39;PRIMARY&#39;</span>
<span class="n">ERROR</span> <span class="mi">1062</span> <span class="p">(</span><span class="mi">23000</span><span class="p">):</span> <span class="n">Duplicate</span> <span class="n">entry</span> <span class="s1">&#39;D39-20-05&#39;</span> <span class="k">for</span> <span class="n">key</span> <span class="s1">&#39;PRIMARY&#39;</span>
<span class="n">ERROR</span> <span class="mi">1062</span> <span class="p">(</span><span class="mi">23000</span><span class="p">):</span> <span class="n">Duplicate</span> <span class="n">entry</span> <span class="s1">&#39;D39-20-06&#39;</span> <span class="k">for</span> <span class="n">key</span> <span class="s1">&#39;PRIMARY&#39;</span>
<span class="n">mysql</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p>The Perl script <cite>dealers.pl</cite> will read and translate the data contained in SALESDATA/dealerships.txt into two files in the q03 directory:
- <cite>dealers.sql</cite>
- <cite>owners.sql</cite></p>
<p>These two files contain the mysql commands needed to insert data into a table containing the dealers and owners. Run script <cite>dealers.pl</cite> so it can create the files <cite>dealers.sql</cite> and <cite>owners.sql</cite>.</p>
</li>
<li><p>Insert these two datasets into the sales database using commands like the one in step 3 above to create the dealers and owners table in your sales database.</p>
<p>You should be able to check this result by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">USE</span> <span class="n">sales</span><span class="p">;</span>
<span class="n">Database</span> <span class="n">changed</span>
<span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SHOW</span> <span class="n">TABLES</span><span class="p">;</span>
<span class="o">+-----------------+</span>
<span class="o">|</span> <span class="n">Tables_in_sales</span> <span class="o">|</span>
<span class="o">+-----------------+</span>
<span class="o">|</span> <span class="n">agents</span>          <span class="o">|</span>
<span class="o">|</span> <span class="n">dealers</span>         <span class="o">|</span>
<span class="o">|</span> <span class="n">owners</span>          <span class="o">|</span>
<span class="o">+-----------------+</span>
<span class="mi">3</span> <span class="n">rows</span> <span class="ow">in</span> <span class="nb">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
<span class="n">mysql</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Check that these tables contain the correct number of dealers and owners and then check a couple of the individual entries by hand by comparing the data in the original data with the data in the database.</p>
<p>Some MySQL keywords such as DESCRIBE, SELECT COUNT(*), and LIMIT can be informative:</p>
<p><strong>DESCRIBE:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">DESCRIBE</span> <span class="n">owners</span><span class="p">;</span>
<span class="o">+----------+-------------+------+-----+---------+-------+</span>
<span class="o">|</span> <span class="n">Field</span>    <span class="o">|</span> <span class="n">Type</span>        <span class="o">|</span> <span class="n">Null</span> <span class="o">|</span> <span class="n">Key</span> <span class="o">|</span> <span class="n">Default</span> <span class="o">|</span> <span class="n">Extra</span> <span class="o">|</span>
<span class="o">+----------+-------------+------+-----+---------+-------+</span>
<span class="o">|</span> <span class="n">owner_id</span> <span class="o">|</span> <span class="nb">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>     <span class="o">|</span> <span class="n">NO</span>   <span class="o">|</span> <span class="n">PRI</span> <span class="o">|</span> <span class="n">NULL</span>    <span class="o">|</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">fname</span>    <span class="o">|</span> <span class="n">varchar</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span> <span class="o">|</span> <span class="n">YES</span>  <span class="o">|</span>     <span class="o">|</span> <span class="n">NULL</span>    <span class="o">|</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">lname</span>    <span class="o">|</span> <span class="n">varchar</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span> <span class="o">|</span> <span class="n">YES</span>  <span class="o">|</span>     <span class="o">|</span> <span class="n">NULL</span>    <span class="o">|</span>       <span class="o">|</span>
<span class="o">+----------+-------------+------+-----+---------+-------+</span>
<span class="mi">3</span> <span class="n">rows</span> <span class="ow">in</span> <span class="nb">set</span> <span class="p">(</span><span class="mf">0.02</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>SELECT COUNT(*)</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="n">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">FROM</span> <span class="n">owners</span><span class="p">;</span>
<span class="o">+----------+</span>
<span class="o">|</span> <span class="n">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">|</span>
<span class="o">+----------+</span>
<span class="o">|</span>       <span class="mi">34</span> <span class="o">|</span>
<span class="o">+----------+</span>
<span class="mi">1</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>LIMIT</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">owners</span> <span class="n">LIMIT</span> <span class="mi">5</span><span class="p">;</span>
<span class="o">+----------+----------+----------+</span>
<span class="o">|</span> <span class="n">owner_id</span> <span class="o">|</span> <span class="n">fname</span>    <span class="o">|</span> <span class="n">lname</span>    <span class="o">|</span>
<span class="o">+----------+----------+----------+</span>
<span class="o">|</span>        <span class="mi">1</span> <span class="o">|</span> <span class="n">Sally</span>    <span class="o">|</span> <span class="n">Walker</span>   <span class="o">|</span>
<span class="o">|</span>        <span class="mi">2</span> <span class="o">|</span> <span class="n">Ed</span>       <span class="o">|</span> <span class="n">Tipton</span>   <span class="o">|</span>
<span class="o">|</span>        <span class="mi">3</span> <span class="o">|</span> <span class="n">Kelly</span>    <span class="o">|</span> <span class="n">Jones</span>    <span class="o">|</span>
<span class="o">|</span>        <span class="mi">4</span> <span class="o">|</span> <span class="n">Patrick</span>  <span class="o">|</span> <span class="n">Wallace</span>  <span class="o">|</span>
<span class="o">|</span>        <span class="mi">5</span> <span class="o">|</span> <span class="n">Jonathan</span> <span class="o">|</span> <span class="n">Houseman</span> <span class="o">|</span>
<span class="o">+----------+----------+----------+</span>
<span class="mi">5</span> <span class="n">rows</span> <span class="ow">in</span> <span class="nb">set</span> <span class="p">(</span><span class="mf">0.00</span> <span class="n">sec</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
<p><strong>To check this part of the assignment:</strong></p>
<ol class="arabic simple">
<li><p>Change to your class/a04/q03 directory.</p></li>
<li><p>Answer the questions below in the file <cite>a03.txt</cite>.</p></li>
<li><p>Run the script <cite>check03.sh</cite> (using <cite>./check03.sh</cite>) to check your answer</p></li>
</ol>
<p><strong>Questions for Part 3:</strong></p>
<ol class="arabic simple">
<li><p>How many agents are in the sales database? (### don’t forget to USE database first)</p></li>
<li><p>How many dealers are in the sales database?</p></li>
<li><p>How many insert statements are in the <cite>dealers.sql</cite> file?</p></li>
<li><p>How many lines are in the <cite>SALESDATA/dealerships.txt</cite> file?</p></li>
</ol>
</div>
<div class="admonition-part-4-automating-the-data-checking-procedure admonition">
<p class="admonition-title">Part 4. Automating the Data Checking Procedure</p>
<p>Because we have a lot of data, we will need a process to check the data insertion process. The process will require checking the tables created within MySQL to make sure that they contain the same information as the original text files. To do that, we need automated ways to compare the data in the text files to the data in your MySQL database. Since this is a multistep process, it is helpful to check the data after each step.</p>
<p><strong>Use your `~/class/a04/q04` directory for this part of the lab.</strong></p>
<ol class="arabic">
<li><p>Create links to enable you to access the SALESDATA directory and the <cite>agents.sql</cite>, <cite>dealers.sql</cite>, and <cite>owners.sql</cite> files you created in Part 3. We create soft (symbolic) links to these files to accomplish this. The basic command for linking your <cite>agents.sql</cite> file in your q03 directory to a file with the same name in your q04 directory is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ln –s ~/class/a04/q03/agents.sql agents.sql
</pre></div>
</div>
<p>Once you have entered the above command, you can use the file <cite>agents.sql</cite> as if it were located in your q04 directory. The only critical difference is that the command <cite>rm agents.sql</cite> removes the link in the q04 directory, but not the file in the q03 directory since it’s a soft link to the file. Using the <cite>ls -l</cite> command, you can see this soft link points to the original file in q03:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>chen_user@vma49:~/class/a04/q04$ ls -l
total 16
-r--r--r-- 1 chen_user chen_user  320 Feb 17  2020 a04.bak
-rw-rw-r-- 1 chen_user chen_user  320 Feb 17  2020 a04.txt
lrwxrwxrwx 1 chen_user chen_user   40 Feb 23 12:20 agents.sql -&gt; /home/chen_user/class/a04/q03/agents.sql
-rwxrwxr-x 1 chen_user chen_user 3995 Dec 19  2019 check04.sh
-rwxrwxr-x 1 chen_user chen_user  904 Dec 19  2019 link_data.sh
</pre></div>
</div>
<p>Create the link above as a practice, remove the link, and then run the script <cite>link_data.sh</cite>. It will create all of the required links for this assignment.</p>
</li>
<li><p>Create a script called <cite>q04.sh</cite> that uses some combination of command <cite>grep</cite> and <cite>wc</cite> to:</p>
<ul class="simple">
<li><p>Count <a href="#id1"><span class="problematic" id="id2">*</span></a>.txt: Count the number of agents, dealers, and owners contained in the initial text data files, i.e., <cite>agents.txt</cite> and <cite>dealerships.txt</cite>. Assume each dealership has a single owner and don’t worry about one person owning multiple dealerships for now.</p></li>
<li><p>Count <a href="#id3"><span class="problematic" id="id4">*</span></a>.sql: Count the number of agents, dealers, and owners contained in the <cite>agents.sql</cite>, <cite>dealers.sql</cite>, and <cite>owners.sql</cite> files</p></li>
<li><p>Count Alabama: Count the number of dealers in Alabama in your initial text data and sql files.</p></li>
<li><p>Count Walker: Count the number of dealerships owned by someone named Walker in your initial text data and compare it to the number of owners in <cite>owners.sql</cite> files who have a last name of Walker.</p></li>
</ul>
<p>Once you have figured out which combinations of commands provide the correct output, compile them all into the script <cite>q04.sh</cite> and produce a summary output.</p>
<p>When you are done, your output should look something like the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Initial</span> <span class="n">Data</span> <span class="n">File</span> <span class="n">Counts</span>
<span class="n">Agents</span><span class="p">:</span>     <span class="n">DATA</span> <span class="o">=</span> <span class="mi">397</span>  <span class="n">SQL</span> <span class="o">=</span> <span class="mi">397</span>
<span class="n">Dealers</span><span class="p">:</span>    <span class="n">DATA</span> <span class="o">=</span> <span class="mi">45</span>   <span class="n">SQL</span> <span class="o">=</span> <span class="mi">45</span>
<span class="n">Owners</span><span class="p">:</span>     <span class="n">DATA</span> <span class="o">=</span> <span class="mi">45</span>   <span class="n">SQL</span> <span class="o">=</span> <span class="mi">45</span>
<span class="n">Alabama</span><span class="p">:</span>    <span class="n">DATA</span> <span class="o">=</span> <span class="mi">11</span>   <span class="n">SQL</span> <span class="o">=</span> <span class="mi">11</span>
<span class="n">Walker</span><span class="p">:</span>     <span class="n">DATA</span> <span class="o">=</span> <span class="mi">2</span>    <span class="n">SQL</span> <span class="o">=</span> <span class="mi">4</span>
</pre></div>
</div>
</li>
</ol>
<p><strong>To check part 4 of this assignment:</strong></p>
<ol class="arabic simple">
<li><p>Change to your class/a04/q04 directory.</p></li>
<li><p>Enter DONE for part A. in the file <cite>a04.txt</cite> when you are done.</p></li>
<li><p>Run the script <cite>check04.sh</cite> (using <cite>./check04.sh</cite>) to check your answer.</p></li>
</ol>
<p><strong>Note:</strong>
<em>Sometimes when you copy the commands from the webpages or PowerPoint slides, the dash - before the option may become a long dash, which is not accepted in bash. In that case, just modify them as short dashes.</em></p>
<p><strong>Note:</strong>
<em>You will not find a file named `owners.txt`. Instead, the owner information is part of the `dealerships.txt`. Ideally, to count owners, you may want to count distinct Owner ID’s. In this question, if you just count the number of records (disregard that some owners own more than one dealership), you will pass the check script. In this case, the number of Owners counted will be larger than that from the .sql file because of some owners own multiple dealerships.</em></p>
</div>
<div class="admonition-part-5-automating-mysql-checking-procedure admonition">
<p class="admonition-title">Part 5. Automating MySQL Checking Procedure</p>
<p><strong>Use nano to create a mysql input file (call it `q05.sql`). This .sql script will be used to obtain some information from the tables so that we can verify the information in the sales database is correct. The process used is as follows:</strong></p>
<p><strong>Step 1: Create SQL statements</strong></p>
<p>Create a file called <cite>q05.sql</cite> that contains all of the SQL statements needed to answer questions A-G below. (don’t forget the <cite>USE sales;</cite> statement to specify the database to use at the beginning of a .sql file).</p>
<p><strong>Step 2: Run .sql to generate .txt file</strong></p>
<p>Run mysql from the Linux command line, use <cite>q05.sql</cite> as input and write the output into <cite>q05.txt</cite>. This can be done by issuing commands in the Linux command line as such:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mysql</span> <span class="o">-</span><span class="n">u</span> <span class="n">mysql_username</span> <span class="o">-</span><span class="n">pmysql_password</span> <span class="o">&lt;</span> <span class="n">q05</span><span class="o">.</span><span class="n">sql</span> <span class="o">&gt;</span> <span class="n">output</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>Note that in the command above, we use the MySQL command line tool, <cite>mysql</cite>, followed by username and password, then we use I/O redirections to input the .sql file and output the .txt file.</p>
<p>The <cite>q05.sql</cite> file should contain the SQL statements needed to answer the following questions:</p>
<ul class="simple">
<li><p>How many agents are there in total? ### SELECT COUNT</p></li>
<li><p>How many unique owners are there in total? ### SELECT DISTINCT COUNT( )</p></li>
<li><p>How many agents have a first name of Bill? ### SELECT … WHERE …</p></li>
<li><p>How many dealerships are in Alabama? ### SELECT … WHERE …</p></li>
<li><p>How many dealers are in Sawyer, TN? ### SELECT … WHERE … AND …</p></li>
<li><p>How many dealerships are owned by someone whose last name is Walker? ### JOIN</p></li>
<li><p>How many sales agents work for Maureen Isern? ### JOIN</p></li>
</ul>
<p><strong>To check Part 5 of this assignment:</strong></p>
<ol class="arabic simple">
<li><p>Answer the questions below in the file <cite>a05.txt</cite>. (### You can run <cite>source q05.sql</cite> in mysql command line to see the results of your queries.)</p></li>
<li><p>Run the script <cite>check05.sh</cite> to check your answer.</p></li>
<li><p>Don’t forget to run Step 2 above to generate the .txt output file. The check script may not inform you if the .txt file is missing.</p></li>
</ol>
<p><strong>Questions for Part 5:</strong></p>
<ul class="simple">
<li><p>Enter DONE for part A when you have completed your script. Then answer the rest of the questions in your <cite>a05.txt</cite> file.</p></li>
<li><p>How many agents are there in total?</p></li>
<li><p>How many unique owners are there in total?</p></li>
<li><p>How many agents have a first name of Bill?</p></li>
<li><p>How many dealerships are in Alabama?</p></li>
<li><p>How many dealers are in Sawyer, TN?</p></li>
<li><p>How many dealerships are owned by someone whose last name is Walker?</p></li>
<li><p>How many sales agents work for Maureen Isern?</p></li>
</ul>
<p><strong>Note:</strong>
<em>For the sake of passing the check script, please DO NOT use the AS keyword when you are preparing the INNER JOIN statements.</em></p>
<p><strong>Note:</strong>
<em>A good way to create these SQL statements is to open two SSH terminal windows, run mysql command line in one, and nano editor in the other. Compose and test your SQL statements using mysql, and then cut and paste them into nano when they are working.</em></p>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="week4.html" class="btn btn-neutral float-left" title="5. Week 4" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="02.homework4.html" class="btn btn-neutral float-right" title="5.2. Homework 04 Test &amp; Conditional Expressions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>